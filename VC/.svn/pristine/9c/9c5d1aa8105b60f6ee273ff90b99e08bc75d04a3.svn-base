(function(e){function r(e){if(e.source!=undefined){t=e.source}}function i(t,n){var r=t.userId;var i=t.source;e.get(i,{userId:r},function(e){a(e,n)})}function s(t){e.each(t,function(e,r){var i=false;var s=r.parentID;if(o(s,t)){n.push(r)}})}function o(t,n){var r=0;e.each(n,function(e,n){if(n.menuID==t){r++;return}});if(r==0){return true}else{return false}}function u(t,n){var r=0;e.each(n,function(e,n){if(n.parentID==t){r++;return}});if(r>0){return true}else{return false}}function a(t,r){s(t);for(var i=0;i<n.length;i++){var o=n[i].menuID;var u=n[i].parentID;var a=n[i].isRemind;if(i==0){l(u,t,r,"Y")}if(a!=null){c(o,t,e("#li__"+o),"X")}else{c(o,t,e("#li__"+o))}}e("#myDiv").val(e("#taMenu").html());e("#mytext").val(e("#taMenu").html());taMenu.taMenu({menus:taMenu.getElByClassName("ta-menu","li","taMenu-side"),contents:taMenu.getElByClassName("ta-submnu","ul","taMenu-side"),hideAll:true})}function f(t,n){for(var r=0;r<t.length;r++){var i=t[r];c(i,n,e("#li__"+i))}}function l(t,n,r,i){var s='<div id="taMenu-side"></div>';e(s).appendTo(r);var o='<ul class="ta-mainmnu" id="ul__'+t+'"></ul>';if(i=="Y"){e(o).appendTo(e("#taMenu-side"))}else{e(o).insertAfter(e("#taMenu-side"))}var u="";e.each(n,function(e,n){if(n.parentID==t){var r="#";if(n.url!="#"){r=common.ctx+n.url}if(i=="Y"){u+='<li class= "ta-menu" ';if(n.isRemind=="Y"){u+=' id="ta-right"'}u+=' ><a href="#" id="li__'+n.menuID+'"'}else{u+='<li id="'+n.menuID+'"><a href="#" id="li__'+n.menuID+'" '}u+=">";if(n.isRemind!=null){u+='<img src="'+common.ctx+'/style/default/images/note.gif" border="0" title="工作提醒"></a></li>'}else{u+=n.menuName+"</a></li>"}}});e(u).appendTo(e("#ul__"+t))}function c(t,n,r,i){var s="";if(i=="X"){s='<ul class="ta-submnu notelist" id="ul__'+t+'"></ul>'}else{s='<ul class="ta-submnu" id="ul__'+t+'"></ul>'}if(i=="Y"){e(s).appendTo(r)}else{e(s).insertAfter(r)}var o="";var a=new Array;var l=0;e.each(n,function(r,i){if(i.parentID==t){var s="#";if(i.url!=null&&""!=i.url&&i.url!="#"){s=common.ctx+i.url}if(l<=a.length){if(i.isRemind!="N"){o+='<li id="'+i.menuID+'">'}else{if(l==1){o+='<li id="'+i.menuID+'" style="color:#ff1f00; margin:-10px 0 0 0 !important;" >'}}}if(i.isChild=="Y"){e("#ul__"+t).removeClass("ta-submnu");o+='<span class="nobr">'}if(i.isRemind!="N"){o+='<a href="#" id="li__'+i.menuID+'" data="'+s+'" ';if(s!="#"){o+=' onClick="page.addTab(this)" '}o+=" >"+i.menuName+"</a>"}else{o+="•"+i.menuName+"<br />"}if(i.isChild=="Y"){o+="　|　</span>"}else{a.push(i.menuID)}if(u(i.menuID,n)){if(i.isRemind!="N"){o+="</li>"}else{if(l==1){o+="</li>"}}}l++}});e(o).appendTo(e("#ul__"+t));f(a,n)}var t="";var n=new Array;e.fn.taMenuWidget=function(n){var s=e.extend({},e.fn.taMenuWidget.defaults,n);r(s);if(t!=""&&typeof t=="string"){i(s,this);var o=e(this)}else{this.each(function(){var t=e(this);var n=e.meta?e.extend({},this.opts,t.data()):s})}};e.fn.taMenuWidget.defaults={source:""}})(jQuery)